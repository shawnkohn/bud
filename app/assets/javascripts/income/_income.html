<div class="row">
    <div class="h2 col-md-12 col-md-offset-2">
    
        <span style="padding-right:5px;">Paychecks</span>  
        <a class="btn btn-primary btn-sm" 
            role="button" 
            ng-click="stateAddingNewPaycheck=true" 
            ng-show="!stateAddingNewPaycheck">
            New
        </a>
    </div>
</div>

<div class="row">
    <div class="col-md-4 col-md-offset-4 h4" 
        ng-show="stateAddingNewPaycheck">
        <form name="form"  ng-submit="addPaycheck()">
            <div class="form-group">
                <input type="text"
                class="form-control"
                placeholder="Paycheck Name"
                ng-model="name">
                </input>
            </div>
            <div class="form-group" 
                ng-class="{ 'has-error': form.amount.$invalid }">
                <input type="text"
                class="form-control"
                placeholder="Gross Bi-Weekly Pay Amount"
                ng-model="amount" name="amount" fcsa-number>
                </input>
            
                <div ng-show="form.amount.$invalid" 
                    class="help-block h6">
                    The amount should only have up to two decimals, review the number for accuracy
                </div>
            </div>
            <button type="submit" 
                class="btn btn-primary btn-sm">Add</button>
            <button class="btn btn-secondary btn-sm" 
                ng-click="stateAddingNewPaycheck=false;">
                Cancel
            </button>
        </form>
    </div>
</div>

<div class="row" style="margin-top:15px;">
    <div class="col-md-7 col-md-offset-2">
    <table class="table">
        <tbody class="h4" ng-repeat="paycheck in paychecks">
                <tr>
                    <td> {{paycheck.name}} </td>
                    <td>$</td>
                    <td align="right"> 
                        {{paycheck.amount | number : 2}}
                    </td>
                    <td>
                        <a ng-click="paycheckIdShowingDeductions = paycheck.id">
                            Deductions
                        </a>
                    </td>
                    </tr>
                    <tr ng-if="paycheck.id == paycheckIdShowingDeductions" 
                        class="table-borderless h6">
                        <td colspan=4>
                        <div class="col-md-11 col-md-offset-1">
                            
                            <table class="table">
                                <tbody class="h6" 
                                    ng-repeat="deduction in paycheck.paycheck_deductions">
                                    <tr>
                                        <td> {{deduction.name}} </td>
                                        <td>$</td>
                                        <td align="right"> 
                                            {{deduction.amount | number : 2}}
                                        </td>
                                        <td>
                                            <button type="button" 
                                            class="btn btn-primary btn-xs">
                                            <span class="glyphicon glyphicon-pencil" 
                                                aria-hidden="true"></span>
                                            </button>
                                            <button type="button" 
                                            class="btn btn-danger btn-xs">
                                            <span class="glyphicon glyphicon-remove" 
                                                aria-hidden="true"></span>
                                            </button>
                                        </td>
                                    </tr>
                                </tbody>
                                <tbody>
                                    <tr class="table-borderless h6">
                                        <td colspan=4 align="center">
                                                <form name="deductionForm" 
                                                    ng-submit="addDeduction(paycheck, deduction)">
                                                    <input type="text"
                                                    placeholder="Deduction Name"
                                                    ng-model="deduction.name"></input>
                                                    <input type="text"
                                                    placeholder="Deduction Amount"
                                                    ng-model="deduction.amount" 
                                                    fcsa-number></input>
                                                    <label> Pre Tax?</label>
                                                    <input type="checkbox"
                                                    ng-model="deduction.isDeductedPreTax">
                                                    </input> 
                                                    <button type="submit"
                                                       class="btn-primary btn-xs">
                                                       Add New
                                                    </button>
                                                </form>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        </td>
                    </tr>
                </tr> 
         </tbody>
    </div>
</div>

<div class="row">
    <div class="h2 col-md-6 col-md-offset-2">
        <table class="table table-borderless">
            <tbody>
                <tr>
                    <td>BiWeekly Gross Pay</td>
                    <td align="right">$</td>
                    <td align="right">1,325.46</td>
                </tr>
              
                <tr>
                    <td>BiWeekly Net Pay</td>
                    <td align="right">$</td>
                    <td align="right">325.46</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
